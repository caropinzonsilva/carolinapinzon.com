(this.webpackJsonpgeoguessr=this.webpackJsonpgeoguessr||[]).push([[0],{20:function(e,t,n){e.exports=n(60)},25:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n.n(o),i=(n(25),n(7)),s=n.n(i),u=n(4),l=n(19),m=n.n(l),f=n(9),p=n.n(f),d=n(2),g=(n(59),"AIzaSyB42zRFDOxDAjGNXPBm84tLeVQl68S8_pU");var v=Object(d.GoogleApiWrapper)({apiKey:g})((function(e){var t=e.google,n=Object(a.useRef)(null),o=new t.maps.StreetViewService,c=Object(a.useRef)(0),i=Object(a.useRef)(!1),l=Object(a.useState)(50),f=Object(u.a)(l,2),v=f[0],h=f[1],w=Object(a.useState)(!1),b=Object(u.a)(w,2),O=b[0],j=b[1],S=Object(a.useState)(),E=Object(u.a)(S,2),M=E[0],k=E[1],x=Object(a.useRef)(),y=Object(a.useState)(!1),V=Object(u.a)(y,2),P=V[0],N=V[1],R=Object(a.useState)(),C=Object(u.a)(R,2),I=C[0],z=C[1],B=Object(a.useRef)({url:"guess-pin.png",anchor:new t.maps.Point(8,20),scaledSize:new t.maps.Size(16,20)}),L=Object(a.useRef)({url:"correct-pin.png",anchor:new t.maps.Point(8,20),scaledSize:new t.maps.Size(16,20)});Object(a.useEffect)((function(){var e=setInterval((function(){i.current&&h((function(e){return e-1}))}),1e3);return function(){clearInterval(e)}}),[]),Object(a.useEffect)((function(){v<=0&&N(!0)}),[v]);var A=function(e){var a=e.map,r=e.latLng;i.current=!0,x.current=r;var o=new t.maps.StreetViewPanorama(n.current,{position:r});o.setOptions({showRoadLabels:!1,addressControl:!1}),a.setStreetView(o)},F=function(e){var t=e.from,n=e.to,a=e.fixed;return 1*(Math.random()*(n-t)+t).toFixed(a)},W=function(){var e,t,n,a,r,o;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=F({from:49.0059202,to:49.3910868,fixed:6}),r=F({from:-123.3191662,to:-121.733225,fixed:6}),c.next=4,s.a.awrap(m.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(a,",").concat(r,"&key=").concat(g)));case 4:return o=c.sent,c.abrupt("return",null===o||void 0===o?void 0:null===(e=o.data)||void 0===e?void 0:null===(t=e.results[0])||void 0===t?void 0:null===(n=t.geometry)||void 0===n?void 0:n.location);case 6:case"end":return c.stop()}}))};return r.a.createElement("div",{className:"App"},r.a.createElement(d.Map,{google:t,onReady:function e(t,n){var a;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(c.current>10)){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,s.a.awrap(W());case 4:a=r.sent,o.getPanorama({location:a,radius:50},(function(r,o){if("OK"!==o)return c.current++,e(t,n);A({map:n,latLng:a})}));case 6:case"end":return r.stop()}}))},className:"View--hide"}),r.a.createElement("div",{className:p()("MapView",{"View--hide":!(O||P),"MapView--small":!P})},r.a.createElement(d.Map,{google:t,zoom:10,initialCenter:{lat:49.136539,lng:-122.604144},onClick:function(e,t,n){if(!P){var a=n.latLng.lat(),r=n.latLng.lng();k({lat:a,lng:r})}}},M&&r.a.createElement(d.Marker,{position:M,icon:B.current}),P&&r.a.createElement(d.Marker,{position:x.current,icon:L.current}),P&&r.a.createElement(d.Polyline,{path:[M,x.current],strokeColor:"#000000",strokeOpacity:.8,strokeWeight:2}))),r.a.createElement("div",{className:p()("StreetView",{"StreetView--small":O||P,"View--hide":P}),ref:n}),!P&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Seconds"},v),r.a.createElement("button",{className:"ToggleButton",onClick:function(){j((function(e){return!e}))}},O?"\ud83d\ude97 Street view":"\ud83d\udca1 Guess"),M&&r.a.createElement("button",{className:"ConfirmButton",onClick:function(){z(function(e,t){var n=e.lat,a=e.lng,r=t.lat,o=t.lng;if(n===r&&a===o)return 0;var c=Math.PI*n/180,i=Math.PI*r/180,s=a-o,u=Math.PI*s/180,l=Math.sin(c)*Math.sin(i)+Math.cos(c)*Math.cos(i)*Math.cos(u);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515*1.609344}(x.current,M)),N(!0)}},"\u2705 Confirm guess")),I&&r.a.createElement("div",{className:"Distance"},I.toFixed(2),"km"))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.1b245392.chunk.js.map